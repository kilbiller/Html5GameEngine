!function t(e,i,n){function s(r,a){if(!i[r]){if(!e[r]){var h="function"==typeof require&&require;if(!a&&h)return h(r,!0);if(o)return o(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var p=i[r]={exports:{}};e[r][0].call(p.exports,function(t){var i=e[r][1][t];return s(i?i:t)},p,p.exports,t,e,i,n)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)s(n[r]);return s}({"./src/Main.js":[function(t){"use strict";var e,i=t("./Game");e=new i(800,400),e.run()},{"./Game":"D:\\projects\\Html5GameEngine\\src\\Game.js"}],"D:\\projects\\Html5GameEngine\\src\\Actor.js":[function(t,e){"use strict";function i(t,e,i,r,a,h){n.call(this,t,e,i),this.width=r,this.height=a,this.assetPath=h,this.anims=null,this.currentAnim=null,this.direction="Down",this.hitbox=new s(0,0,this.width,this.height),this.boundingbox=new s(0,0,this.width,this.height),this.previousPos=new o(this.x,this.y),this.isAlive=!0}var n=t("./engine/Entity"),s=t("./engine/Rectangle"),o=t("./engine/Vector");i.prototype=Object.create(n.prototype),i.prototype.update=function(t){n.prototype.update.call(this,t)},i.prototype.die=function(){this.game.assetManager.getSound("sounds/slime_death.wav");this.anims.setAnim("death"),this.isAlive=!1},i.prototype.getCollisionBox=function(){return new s(this.x+this.boundingbox.x,this.y+this.boundingbox.y,this.boundingbox.width,this.boundingbox.height)},i.prototype.getHitBox=function(){return new s(this.x+this.hitbox.x,this.y+this.hitbox.y,this.hitbox.width,this.hitbox.height)},i.prototype.updateCollisions=function(){var t,e,i;for(i=this.getCollisionBox(),t=0;t<this.game.entities.children.length;t+=1)e=this.game.entities.children[t],this!==e&&null!==e.boundingbox&&i.intersects(e.getCollisionBox())&&(this.x=this.previousPos.x,this.y=this.previousPos.y)},e.exports=i},{"./engine/Entity":"D:\\projects\\Html5GameEngine\\src\\engine\\Entity.js","./engine/Rectangle":"D:\\projects\\Html5GameEngine\\src\\engine\\Rectangle.js","./engine/Vector":"D:\\projects\\Html5GameEngine\\src\\engine\\Vector.js"}],"D:\\projects\\Html5GameEngine\\src\\Ennemy.js":[function(t,e){"use strict";function i(t,e,i,a,h,c){n.call(this,t,e,i,a,h,c),this.speed=150,this.hp=30,this.boundingbox=new r(6,20,20,10);var p=new s(this.assetPath,this.width,this.height);this.anims=new o(p,{idle:{frames:[0],step:.15,loop:!0},death:{frames:[36,37,38],step:.15,loop:!1}}),this.addChild(this.anims)}var n=t("./Actor"),s=t("./engine/SpriteSheet"),o=t("./engine/Animations"),r=t("./engine/Rectangle"),a=t("./engine/Vector");i.prototype=Object.create(n.prototype),i.prototype.update=function(t){this.isAlive&&this.anims.setAnim("idle"),this.anims.getCurrent().update(t),this.zIndex=this.y+this.height,this.previousPos=new a(this.x,this.y)},i.prototype.takeDamage=function(t){this.hp-=t,this.hp<=0&&this.die()},e.exports=i},{"./Actor":"D:\\projects\\Html5GameEngine\\src\\Actor.js","./engine/Animations":"D:\\projects\\Html5GameEngine\\src\\engine\\Animations.js","./engine/Rectangle":"D:\\projects\\Html5GameEngine\\src\\engine\\Rectangle.js","./engine/SpriteSheet":"D:\\projects\\Html5GameEngine\\src\\engine\\SpriteSheet.js","./engine/Vector":"D:\\projects\\Html5GameEngine\\src\\engine\\Vector.js"}],"D:\\projects\\Html5GameEngine\\src\\Game.js":[function(t,e){"use strict";function i(t,e){n.call(this,t,e),this.entities=null,this.camera=new s(0,0,t,e),this.stateManager=new o}var n=t("./engine/GameEngine"),s=t("./engine/Camera"),o=(t("./Player"),t("./StaticObject"),t("./Ennemy"),t("./engine/StateManager")),r=t("./LevelState");i.prototype=Object.create(n.prototype),i.prototype.init=function(){this.stateManager.push(new r(this)),this.gameloop()},i.prototype.update=function(t){this.stateManager.update(t)},e.exports=i},{"./Ennemy":"D:\\projects\\Html5GameEngine\\src\\Ennemy.js","./LevelState":"D:\\projects\\Html5GameEngine\\src\\LevelState.js","./Player":"D:\\projects\\Html5GameEngine\\src\\Player.js","./StaticObject":"D:\\projects\\Html5GameEngine\\src\\StaticObject.js","./engine/Camera":"D:\\projects\\Html5GameEngine\\src\\engine\\Camera.js","./engine/GameEngine":"D:\\projects\\Html5GameEngine\\src\\engine\\GameEngine.js","./engine/StateManager":"D:\\projects\\Html5GameEngine\\src\\engine\\StateManager.js"}],"D:\\projects\\Html5GameEngine\\src\\LevelState.js":[function(t,e){"use strict";function i(t){n.call(this,t)}var n=t("./engine/State"),s=(t("./engine/Camera"),t("./Player")),o=t("./Ennemy"),r=t("./StaticObject");i.prototype=Object.create(n.prototype),i.prototype.onEnter=function(){var t=this.game;t.entities=new PIXI.DisplayObjectContainer,t.entities.addChild(new r(t,150,150,32,32,"img/trunks.png")),t.entities.addChild(new r(t,180,230,32,32,"img/trunks.png")),t.entities.addChild(new r(t,340,200,32,32,"img/trunks.png")),t.entities.addChild(new o(t,300,300,32,32,"img/player.png")),t.entities.addChild(new o(t,400,300,32,32,"img/player.png")),t.entities.addChild(new o(t,300,20,32,32,"img/player.png")),t.entities.addChild(new o(t,50,300,32,32,"img/player.png")),t.entities.addChild(new o(t,90,300,32,32,"img/player.png")),t.entities.addChild(new s(t,50,50,32,32,"img/player.png")),t.stage.addChild(t.entities)},i.prototype.update=function(t){n.prototype.update.call(this,t);for(var e=this.game,i=0;i<e.entities.children.length;i+=1)e.entities.children[i].removeFromWorld||e.entities.children[i].update(t);for(i=e.entities.children.length-1;i>=0;i-=1)e.entities.children[i].removeFromWorld&&e.entities.children.splice(i,1);e.entities.children.sort(function(t,e){return t.zIndex-e.zIndex}),e.camera.update(e.stage)},i.prototype.onExit=function(){},e.exports=i},{"./Ennemy":"D:\\projects\\Html5GameEngine\\src\\Ennemy.js","./Player":"D:\\projects\\Html5GameEngine\\src\\Player.js","./StaticObject":"D:\\projects\\Html5GameEngine\\src\\StaticObject.js","./engine/Camera":"D:\\projects\\Html5GameEngine\\src\\engine\\Camera.js","./engine/State":"D:\\projects\\Html5GameEngine\\src\\engine\\State.js"}],"D:\\projects\\Html5GameEngine\\src\\Player.js":[function(t,e){"use strict";function i(t,e,i,r,h,c){a.call(this,t,e,i,r,h,c),this.speed=150,this.isAttacking=!1,this.attackRect=null,this.boundingbox=new o(6,20,20,10),this.COOLDOWN_TIME=.5,this.attackCooldown=0;var p=new n(this.assetPath,this.width,this.height);this.anims=new s(p,{idleDown:{frames:[0],step:.15,loop:!0},idleUp:{frames:[1],step:.15,loop:!0},idleLeft:{frames:[2],step:.15,loop:!0},idleRight:{frames:[3],step:.15,loop:!0},moveDown:{frames:[4,5,6,7],step:.15,loop:!0},moveUp:{frames:[8,9,10,11],step:.15,loop:!0},moveLeft:{frames:[12,13,14,15],step:.15,loop:!0},moveRight:{frames:[16,17,18,19],step:.15,loop:!0},attackDown:{frames:[20,21,22],step:.1,loop:!1},attackUp:{frames:[24,25,26],step:.1,loop:!1},attackLeft:{frames:[28,29,30],step:.1,loop:!1},attackRight:{frames:[32,33,34],step:.1,loop:!1},death:{frames:[36,37,38],step:.12,loop:!1}}),this.addChild(this.anims)}var n=t("./engine/SpriteSheet"),s=t("./engine/Animations"),o=t("./engine/Rectangle"),r=t("./engine/Vector"),a=t("./Actor");i.prototype=Object.create(a.prototype),i.prototype.update=function(t){{var e=this.game.keyboard;this.game.mouse}!this.isAttacking&&this.isAlive&&(this.anims.setAnim("idle"+this.direction),e.keysDown.hasOwnProperty(90)&&(this.direction="Up",this.y-=this.speed*t,this.anims.setAnim("moveUp")),e.keysDown.hasOwnProperty(83)&&(this.direction="Down",this.y+=this.speed*t,this.anims.setAnim("moveDown")),e.keysDown.hasOwnProperty(81)&&(this.direction="Left",this.x-=this.speed*t,this.anims.setAnim("moveLeft")),e.keysDown.hasOwnProperty(68)&&(this.direction="Right",this.x+=this.speed*t,this.anims.setAnim("moveRight")),this.x=Math.round(this.x),this.y=Math.round(this.y),this.updateCollisions(),this.attackCooldown<=0&&e.keysDown.hasOwnProperty(32)&&this.attack()),this.anims.getCurrent().update(t),this.isAttacking&&this.anims.getCurrent().isDone()&&(this.anims.getCurrent().reset(),this.isAttacking=!1,this.attackRect=null),this.attackCooldown>0&&(this.attackCooldown-=t),this.zIndex=this.y+this.height,this.previousPos=new r(this.x,this.y)},i.prototype.attack=function(){var t,e,i;for(e=this.game.assetManager.getSound("sounds/punch.wav"),this.isAttacking=!0,this.attackCooldown=this.COOLDOWN_TIME,"Up"===this.direction?(this.attackRect=new o(this.x+12,this.y-1,10,1),this.anims.setAnim("attackUp")):"Down"===this.direction?(this.attackRect=new o(this.x+8,this.y+18,20,12),this.anims.setAnim("attackDown")):"Left"===this.direction?(this.attackRect=new o(this.x-4,this.y+13,25,12),this.anims.setAnim("attackLeft")):"Right"===this.direction&&(this.attackRect=new o(this.x+8,this.y+13,25,12),this.anims.setAnim("attackRight")),t=0;t<this.game.entities.children.length;t+=1)i=this.game.entities.children[t],this!==i&&null!==i.hitbox&&i.isAlive&&this.attackRect.intersects(i.getHitBox())&&i.takeDamage(10)},e.exports=i},{"./Actor":"D:\\projects\\Html5GameEngine\\src\\Actor.js","./engine/Animations":"D:\\projects\\Html5GameEngine\\src\\engine\\Animations.js","./engine/Rectangle":"D:\\projects\\Html5GameEngine\\src\\engine\\Rectangle.js","./engine/SpriteSheet":"D:\\projects\\Html5GameEngine\\src\\engine\\SpriteSheet.js","./engine/Vector":"D:\\projects\\Html5GameEngine\\src\\engine\\Vector.js"}],"D:\\projects\\Html5GameEngine\\src\\StaticObject.js":[function(t,e){"use strict";function i(t,e,i,a,h,c){n.call(this,t,e,i),this.width=a,this.height=h,this.assetPath=c,this.anims=null,this.currentAnim=null,this.boundingbox=new r(0,0,this.width,this.height),this.zIndex=this.y+this.height;var p=new s(this.assetPath,this.width,this.height);this.anims=new o(p,{idle:{frames:[0],step:.15,loop:!0}}),this.addChild(this.anims)}var n=t("./engine/Entity"),s=t("./engine/SpriteSheet"),o=t("./engine/Animations"),r=t("./engine/Rectangle");i.prototype=Object.create(n.prototype),i.prototype.update=function(t){this.anims.setAnim("idle"),this.anims.getCurrent().update(t)},i.prototype.getCollisionBox=function(){return new r(this.x+this.boundingbox.x,this.y+this.boundingbox.y,this.boundingbox.width,this.boundingbox.height)},e.exports=i},{"./engine/Animations":"D:\\projects\\Html5GameEngine\\src\\engine\\Animations.js","./engine/Entity":"D:\\projects\\Html5GameEngine\\src\\engine\\Entity.js","./engine/Rectangle":"D:\\projects\\Html5GameEngine\\src\\engine\\Rectangle.js","./engine/SpriteSheet":"D:\\projects\\Html5GameEngine\\src\\engine\\SpriteSheet.js"}],"D:\\projects\\Html5GameEngine\\src\\engine\\Animation.js":[function(t,e){"use strict";function i(t,e,i,n){PIXI.Sprite.call(this,t),this.frameList=e,this.frameDuration=i,this.totalTime=this.frameList.length*this.frameDuration,this.elapsedTime=0,this.loop=n,this.source={}}t("./SpriteSheet");i.prototype=Object.create(PIXI.Sprite.prototype),i.prototype.update=function(t){if(this.elapsedTime+=t,this.isDone()){if(!this.loop)return;this.reset()}var e=this.currentFrame();this.source.x=this.frameList[e]%this.texture.maxColumn*this.texture.frameWidth,this.source.y=Math.floor(this.frameList[e]/this.texture.maxColumn)*this.texture.frameHeight,this.texture.setFrame(new PIXI.Rectangle(this.source.x,this.source.y,this.texture.frameWidth,this.texture.frameHeight))},i.prototype.currentFrame=function(){return this.elapsedTime<=this.totalTime?Math.floor(this.elapsedTime/this.frameDuration):this.frameList.length-1},i.prototype.isDone=function(){return this.elapsedTime>=this.totalTime},i.prototype.reset=function(){this.elapsedTime=0},e.exports=i},{"./SpriteSheet":"D:\\projects\\Html5GameEngine\\src\\engine\\SpriteSheet.js"}],"D:\\projects\\Html5GameEngine\\src\\engine\\Animations.js":[function(t,e){"use strict";function i(t,e){PIXI.DisplayObjectContainer.call(this),this.anims=[],this.spriteSheet=t,this.current=null;var i,n;try{n=JSON.parse(e)}catch(s){n=e}for(i in n)n.hasOwnProperty(i)&&this.addAnim(i,n[i].frames,n[i].step,n[i].loop)}var n=t("./Animation");i.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),i.prototype.addAnim=function(t,e,i,s){this.anims[t]=new n(this.spriteSheet,e,i,s),this.addChild(this.anims[t])},i.prototype.setAnim=function(t){this.current=t;for(var e in this.anims)this.anims[e].visible=!1;this.anims[e].visible=!0},i.prototype.getCurrent=function(){return this.anims[this.current]},e.exports=i},{"./Animation":"D:\\projects\\Html5GameEngine\\src\\engine\\Animation.js"}],"D:\\projects\\Html5GameEngine\\src\\engine\\AssetManager.js":[function(t,e){"use strict";function i(){this.successCount=0,this.errorCount=0,this.cache={},this.soundsQueue=[]}i.prototype.queueSound=function(t){this.soundsQueue.hasOwnProperty(t)||this.soundsQueue.push(t)},i.prototype.isDone=function(){return this.soundsQueue.length===this.successCount+this.errorCount},i.prototype.downloadAll=function(){var t,e,i,n;for(n=function(){this.successCount+=1},t=0;t<this.soundsQueue.length;t+=1)e=this.soundsQueue[t],i=new Audio(e),this.successCount+=1,i.src=e,this.cache[e]=i},i.prototype.getSound=function(t){return this.cache[t]},e.exports=i},{}],"D:\\projects\\Html5GameEngine\\src\\engine\\Camera.js":[function(t,e){"use strict";function i(t,e,i,s){this.viewport=new n(t,e,i,s),this.followed=null}var n=t("./Rectangle");i.prototype.offset=function(t,e){this.viewport.offset(t,e)},i.prototype.follow=function(t){this.followed=t},i.prototype.update=function(t){null!==this.followed&&this.offset(this.followed.pos.x+this.followed.width/2-this.viewport.width/2,this.followed.pos.y+this.followed.height/2-this.viewport.height/2),t.getChildAt(0).position.x=-this.viewport.x,t.getChildAt(0).position.y=-this.viewport.y},e.exports=i},{"./Rectangle":"D:\\projects\\Html5GameEngine\\src\\engine\\Rectangle.js"}],"D:\\projects\\Html5GameEngine\\src\\engine\\Entity.js":[function(t,e){"use strict";function i(t,e,i){PIXI.DisplayObjectContainer.call(this),this.game=t,this.x=e,this.y=i,this.zIndex=i,this.removeFromWorld=!1}i.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),i.prototype.update=function(){},e.exports=i},{}],"D:\\projects\\Html5GameEngine\\src\\engine\\GameEngine.js":[function(t,e){"use strict";function i(t,e){this.stage=new PIXI.Stage(32768),this.renderer=PIXI.autoDetectRenderer(t,e),document.body.appendChild(this.renderer.view),this.timer=new n,this.assetManager=new s,this.keyboard=new o}{var n=t("./Timer"),s=t("./AssetManager"),o=(t("./Entity"),t("./Keyboard"));t("./Mouse")}i.prototype.gameloop=function(){var t=this.timer.tick();this.update(t),this.renderer.render(this.stage),requestAnimFrame(this.gameloop.bind(this))},i.prototype.run=function(){this.init()},e.exports=i},{"./AssetManager":"D:\\projects\\Html5GameEngine\\src\\engine\\AssetManager.js","./Entity":"D:\\projects\\Html5GameEngine\\src\\engine\\Entity.js","./Keyboard":"D:\\projects\\Html5GameEngine\\src\\engine\\Keyboard.js","./Mouse":"D:\\projects\\Html5GameEngine\\src\\engine\\Mouse.js","./Timer":"D:\\projects\\Html5GameEngine\\src\\engine\\Timer.js"}],"D:\\projects\\Html5GameEngine\\src\\engine\\Keyboard.js":[function(t,e){"use strict";function i(){this.keysDown={},window.addEventListener("keydown",function(t){this.keysDown[t.keyCode]=!0}.bind(this),!1),window.addEventListener("keyup",function(t){delete this.keysDown[t.keyCode]}.bind(this),!1)}e.exports=i},{}],"D:\\projects\\Html5GameEngine\\src\\engine\\Mouse.js":[function(t,e){"use strict";function i(t){this.pos=new n(0,0),this.leftClick=!1,this.middleClick=!1,this.rightClick=!1,this.game=t,window.addEventListener("mousedown",function(t){this.mouseDown(t)}.bind(this),!1),window.addEventListener("mouseup",function(t){this.mouseUp(t)}.bind(this),!1)}var n=t("./Vector");i.prototype.ScreenToWorld=function(){return new n(this.pos.x+this.game.camera.viewport.x,this.pos.y+this.game.camera.viewport.y)},i.prototype.mouseDown=function(t){var e,i;e=t.clientX-this.game.ctx.canvas.getBoundingClientRect().left,i=t.clientY-this.game.ctx.canvas.getBoundingClientRect().top,this.isOutsideCanvas(e,i)||(this.pos.x=e,this.pos.y=i,this.pos.x+=this.game.camera.viewport.x,this.pos.y+=this.game.camera.viewport.y,0===t.button&&(this.leftClick=!0),1===t.button&&(this.middleClick=!0),2===t.button&&(this.rightClick=!0))},i.prototype.mouseUp=function(){this.leftClick=!1,this.middleClick=!1,this.rightClick=!1},i.prototype.isOutsideCanvas=function(t,e){var i=this.game.ctx.canvas;return 0>t||0>e||t>i.width||e>i.height?!0:!1},e.exports=i},{"./Vector":"D:\\projects\\Html5GameEngine\\src\\engine\\Vector.js"}],"D:\\projects\\Html5GameEngine\\src\\engine\\Rectangle.js":[function(t,e){"use strict";function i(t,e,i,n){this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0}i.prototype.offset=function(t,e){this.x=t||this.x,this.y=e||this.y},i.prototype.draw=function(t,e,i){i=i||1,e=e||"#000000",t.save(),t.strokeStyle=e;var n,s;n=Math.round(this.x),s=Math.round(this.y),t.strokeRect(n,s,this.width*i,this.height*i),t.restore()},i.prototype.intersects=function(t){return this.x<=t.x+t.width&&this.x+this.width>=t.x&&this.y<=t.y+t.height&&this.y+this.height>=t.y},e.exports=i},{}],"D:\\projects\\Html5GameEngine\\src\\engine\\SpriteSheet.js":[function(t,e){"use strict";function i(t,e,i){PIXI.Texture.call(this,PIXI.Texture.fromImage(t)),this.frameWidth=e,this.frameHeight=i,this.maxColumn=128/this.frameWidth,this.maxRow=320/this.frameHeight}i.prototype=Object.create(PIXI.Texture.prototype),e.exports=i},{}],"D:\\projects\\Html5GameEngine\\src\\engine\\State.js":[function(t,e){"use strict";function i(t){this.game=t}i.prototype.onEnter=function(){},i.prototype.update=function(){},i.prototype.onExit=function(){},i.prototype.onPause=function(){},i.prototype.onResume=function(){},e.exports=i},{}],"D:\\projects\\Html5GameEngine\\src\\engine\\StateManager.js":[function(t,e){"use strict";function i(){this.states=[]}i.prototype.update=function(t){var e=this.states[this.states.length-1];e&&e.update(t)},i.prototype.push=function(t){this.states.push(t),t.onEnter()},i.prototype.pop=function(){var t=this.states[this.states.length-1];return t.onExit(),this.states[this.states.length-1]},i.prototype.pause=function(){var t=this.states[this.states.length-1];t.onPause&&t.onPause()},i.prototype.resume=function(){var t=this.states[this.states.length-1];t.onResume&&t.onResume()},e.exports=i},{}],"D:\\projects\\Html5GameEngine\\src\\engine\\Timer.js":[function(t,e){"use strict";function i(){this.gameTime=0,this.maxStep=.05,this.previousTime=0}i.prototype.tick=function(){var t,e,i;return t=Date.now(),e=(t-this.previousTime)/1e3,this.previousTime=t,i=Math.min(e,this.maxStep),this.gameTime+=i,i},e.exports=i},{}],"D:\\projects\\Html5GameEngine\\src\\engine\\Vector.js":[function(t,e){"use strict";function i(t,e){this.x=t,this.y=e}i.prototype.normalize=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y);this.x/=t,this.y/=t},i.moveTowards=function(t,e,n){var s=new i(e.x-t.x,e.y-t.y);return s.normalize(),new i(t.x+s.x*n,t.y+s.y*n)},e.exports=i},{}]},{},["./src/Main.js"]);